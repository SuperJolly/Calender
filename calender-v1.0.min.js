!function(a,b){var d,f,j,g=0,h=0,i=0,k=["一","二","三","四","五","六","日"],l=[526701,1198,2647,330317,3366,3477,265557,1386,2477,133469,1198,398491,2637,3365,334501,2900,3434,135898,2395,461111,1175,2635,333387,1701,1748,267701,694,2391,133423,1175,396438,3402,3749,331177,1453,694,201326,2350,465197,3221,3402,400202,2901,1386,267611,605,2349,137515,2709,464533,1738,2901,330421,1242,2651,199255,1323,529706,3733,1706,398762,2741,1206,267438,2647,1318,204070,3417,461653,1386,2413,330077,1197,2637,268877,3365,531109,2900,2982,398042,2395,1179,267415,2635,661067,1701,1748,398772,2742,2391,330031,1175,1611,200010,3749,527702,1452,2742,332397,2350,3222,268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877,1706,2773,133467,1131,398510,2638,3366,335142,3411,1450,200042,2413,723293,1197,2637,399947,3365,3410,334676,2906,1389,132507,1179,464023,2635,2725,333477,1746,2778,199350,2359,526639,1175,1611,396618,3749,1706,267628,2734,2350,203054,3222,465557,3402,3493,330581,1386,2669,264797,1325,529707,3402,2890,399018,2773,1370,267450,2651,1323,202023,1683,462419,1706,2773,330165,1206,2647,264782,3350,531750,3410,3498,396650,1389,1198,398493,2605,3350,138021,3410],m=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],n=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],o=["元旦","春节","清明","劳动节","端午节","中秋节","国庆节"],p=["世界湿地日","情人节","元宵节","国际妇女节","龙头节","植树节","国际消费者权益日","世界地球日","五四青年节","母亲节","国际护士节","国际博物馆日","儿童节","世界环境日","国际奥林匹克日","世界骨质疏松日","建党节","建军节","七夕节","中元节","抗战胜利纪念日","教师节","重阳节","感恩节(加拿大)","寒衣节","世界学生日","下元节","感恩节(美国)","世界艾滋病日","平安夜","圣诞节"],q=["一","二","三","四","五","六","七","八","九","十"],r=["一","二","三","四","五","六","七","八","九","十","十一","十二"],s=["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],t=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],u=[0x95a59a599aa5,0xa5a6aa9aaaa9,0xa9aaaeaaaaaa,0xaafaeeaeeaaa,0xeaa59a599aa5,0xa9aaaaaaaaaa,0xeaa59a599a95,0x95a6aa9a9aa9,0xa5a6aaaaaaaa,0xaabaaeaaeaaa,0xaaa59a599695,0x95a69a9a9aa9,0xa5a6aaaaaaa9,0x95a59a9a9aa5,0xa9aaaeaaeaaa,0xaaa59a599555,0xaaa599599555,0xaaa559599555,0x95a59a599695,0xaa6559559555,94169747527317,0x95a59a9a9aa9,0xaa5559559555,0xa95559555555,94169730749781,0xa95555555555,94168657007957,0xa5a6aa9a9aa9,0xa95155555555,94168656745813,0x95a59a5996a5,0xa55155455555,93893778838869,0x95a59a5a9aa5,0xa55155455554,93825059345749,94169730750101,92725547717973,92725480871253,92725480609109,0xa55155454554,92708300739925,0xa55145454554,92708299691349,0x955045454554,88310253180245,0x955045044554,88310253180244,0x955045044550,88309984740692,0x955045044150,88305689773396,0x955044044140,70713499469140,93803226874176,93824992236885,70713499469136,93803226873856,93802152869888,70713499468112,88305685579092,70713482690880,88305685513556,93458555469824,344738513216,93458488360960,344738512896,92358976733184,344738250752],v=[66051,67175683,67175683,101124105,168496137,168627214,168624398,251658498,268435717,268435717,268435717,286394120,320083208,320081153,370409473,387448833,387448833,421003265,421134363,471670283,471667221,522196001,572728320,572856320,572921856,572987392,572988672,673783070,707468562,741154852,774841124,808396568,808396568,808396573,808396573,808528157,842214173,875900195,909454647,909651767,959983399,959983399,976761127,976957739,976960555,977092141,1061172525,1094727727,1094858799,1128544303,654311424],w=[4,19,3,18,4,19,4,19,4,20,4,20,6,22,6,22,6,22,7,22,6,21,6,21],x=function(a){return new x.fn.init(a)};x.fn=x.prototype={init:function(a){return this.createView(a)},con:{},module:{},createView:function(a){var b=a||{},c=this;dateConId=b.containId||"datePs",dateCon=this.getEmt(dateConId),c.con.datesPicks||(c.con.datesPicks=c.creatEmt("div"),c.con.datesPicks.id="prt_div",c.con.datesPicks.className="prt_div",c.con.datesPicks.style.display="block",c.con.datesPicks.style.zIndex=9999,dateCon.appendChild(c.con.datesPicks),c.con.datesPicks.innerHTML="<div id='c-header' class='tp-div-bar clearfix'><div class='tp-control-bar'><div class='tp-control-module year-bar'><span id='prev-y-bar' class='prev-bar'></span><div id='select-year-bar' class='select-bar'><i class='sel-icon'></i><div id='year_field' class='year-field'>"+(new Date).getFullYear()+"年</div>"+"</div>"+"<span id='next-y-bar' class='next-bar'>"+"</span>"+"<ul id='year_list' class='year-list list-control' style='display:none;'>"+function(){var b,a="";for(b=1900;2100>=b;b++)a+="<li class='list-item'>"+b+"年"+"</li>";return a}()+"</ul>"+"</div>"+"<div class='tp-control-module month-bar'>"+"<span id='prev-m-bar' class='prev-bar'>"+"</span>"+"<div id='select-month-bar' class='select-bar'>"+"<i class='sel-icon'></i>"+"<div id='month_field' class='month-field'>"+((new Date).getMonth()+1).toString()+"月</div>"+"</div>"+"<span id='next-m-bar' class='next-bar'>"+"</span>"+"<ul id='month_list' class='month-list list-control' style='display:none;'>"+function(){var b,a="";for(b=1;12>=b;b++)a+="<li class='list-item'>"+b+"月"+"</li>";return a}()+"</ul>"+"</div>"+"<div class='tp-control-module holiday-bar' id='hol-bar'>"+"<i class='sel-icon'></i>"+"<div id='hol_field' class='hol-field select-bar'>"+(new Date).getFullYear()+"年假日安排"+"</div>"+"<ul id='hol_list' class='hol-list list-control' style='display:none;'>"+function(){var b,a="";for(b=0;b<o.length;b++)a+="<li class='list-item'>"+o[b]+"</li>";return a}()+"</ul>"+"</div>"+"<div id='backToday' class='back-day'>"+"回到今天"+"</div>"+"</div>"+"<div class='ctime-bar'>"+"<dl class='clearfix'>"+"北京时间:&nbsp;"+"<span id='cur_time' class='cur-time'>"+function(){var a=new Date;return sTh=1==a.getHours().toString().length?"0"+a.getHours():a.getHours(),sTm=1==a.getMinutes().toString().length?"0"+a.getMinutes():a.getMinutes(),sTs=1==a.getSeconds().toString().length?"0"+a.getSeconds():a.getSeconds(),sTh+":"+sTm+":"+sTs}()+"</span>"+"</dl>"+"</div>"+"</div>"+"<div class='body-div-bar'>"+"<div class='cal-col-1'>"+"<ul class='dates-hd clearfix'>"+function(){var b,a="";for(b=0;7>b;b++)a+="<li class='days-title'>"+k[b]+"</li>";return a}()+"</ul>"+"<ol id='dates_bd' class='dates-bd'>"+function(){var c,b=[];for(c=0;c<6*k.length;c++)b[c]="<li><span class='hol-border'></span><div class='day-solar'></div><span class='day-lunar'></span></li>";return b.join("")}()+"</ol>"+"</div>"+"<div class='cal-col-2'>"+"<div id='lunar-panel' class='lunar-panel'>"+"<div class='lunar-dates-bar'>"+"<span id='ln_date' class='ln-date'>"+function(){var a=new Date;return lum=a.getMonth()<9?"0"+(a.getMonth()+1).toString():(a.getMonth()+1).toString(),lud=a.getDate()<10?"0"+a.getDate():a.getDate(),(new Date).getFullYear()+"-"+lum+"-"+lud}()+"</span>"+"<span id='ln_weekday' class='ln-weekday'>"+function(){var a=(new Date).getDay();return 0==a?"星期日":"星期"+k[a-1]}()+"</span>"+"</div>"+"<div id='date_sp' class='date-sp'>"+(new Date).getDate()+"</div>"+"<div id='date_ln' class='date-ln'>"+"<div id='g_lunar' class='g-lunar'>"+"</div>"+"<div id='g_ln_info' class='g-ln-info'>"+"</div>"+"<div class='g-ln-term'>"+"<span class='g-anim-year'>"+"["+"<em id='g_animal'>"+"</em>"+"]"+"</span>"+"<span id='g_astro' class='g-astro'>"+"</span>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>",this.createModule())},backCurrentDay:function(){var g,b=this,c=new Date,d=c.getFullYear(),e=c.getMonth(),f=b.module.calBody.getElementsByTagName("li");for(yearField=b.module.yearField,monthField=b.module.monthField,day=c.getDate(),yearField.innerText=d+"年",monthField.innerText="".concat(e+1)+"月",g=0;g<f.length;g++)f[g].className="";b.showCurrentCal(d,e),b.showLunarBlock(d,e,day)},toPrevMonth:function(a){var d,e,g,h,i,j,k,c=this;if(f=f||b,d=this.module.monthField,e=this.module.yearField,g=this.module.calBody,h=g.getElementsByTagName("li"),f&&(1900==f[0]&&f[1]>0||f[0]>1900)){for(f[1]--,i=0;i<h.length;i++)h[i].className="",j=h[i].getElementsByClassName("day-lunar")[0],j.setAttribute("title",""),j.className="day-lunar";c.showCurrentCal(f[0],f[1]),d.innerText="".concat(f[1]+1)+"月",e.innerText=f[0]+"年"}else 1900==f[0]&&0==f[1]&&(k=a.target||a.srcElement,k.removeEventListener?k.removeEventListener("click",function(){c.toPrevMonth()}):k.detachEvent&&k.detachEvent("onclick",function(){c.toPrevMonth()}))},toNextMonth:function(a){var d,e,g,h,i,j,k,c=this;if(f=f||b,d=this.module.monthField,e=this.module.yearField,g=this.module.calBody,h=g.getElementsByTagName("li"),f&&(2100==f[0]&&f[1]<11||f[0]<2100)){for(f[1]++,i=0;i<h.length;i++)h[i].className="",j=h[i].getElementsByClassName("day-lunar")[0],j.setAttribute("title",""),j.className="day-lunar";c.showCurrentCal(f[0],f[1]),d.innerText="".concat(f[1]+1)+"月",e.innerText=f[0]+"年"}else 2100==f[0]&&11==f[1]&&(k=a.target||a.srcElement,k.removeEventListener?k.removeEventListener("click",function(){c.toNextMonth()}):k.detachEvent&&k.detachEvent("onclick",function(){c.toNextMonth()}))},toPrevYear:function(a){var d,e,g,h,i,j,c=this;if(f=f||b,d=this.module.yearField,e=this.module.calBody,g=e.getElementsByTagName("li"),f&&f[0]>=1901&&f[0]<=2100){for(f[0]--,h=0;h<g.length;h++)g[h].className="",i=g[h].getElementsByClassName("day-lunar")[0],i.setAttribute("title","");c.showCurrentCal(f[0],f[1]),d.innerText=f[0]+"年"}1900==f[0]&&(j=a.target||a.srcElement,j.removeEventListener?j.removeEventListener("click",function(){c.toPrevYear()}):j.detachEvent&&j.detachEvent("onclick",function(){c.toPrevYear()}))},toNextYear:function(){var c,d,g,h,i,j,a=this;if(f=f||b,c=this.module.yearField,d=this.module.calBody,g=d.getElementsByTagName("li"),f&&f[0]>=1900&&f[0]<=2099){for(f[0]++,h=0;h<g.length;h++)g[h].className="",i=g[h].getElementsByClassName("day-lunar")[0],i.setAttribute("title","");a.showCurrentCal(f[0],f[1]),c.innerText=f[0]+"年"}1900==f[0]&&(j=e.target||e.srcElement,j.removeEventListener?j.removeEventListener("click",function(){a.toNextYear()}):j.detachEvent&&j.detachEvent("onclick",function(){a.toNextYear()}))},showYearList:function(){var c,j,k,b=this,d=this.module.yearList,e=this.module.yearField,h=this.module.calBody.getElementsByTagName("li"),i=d.getElementsByTagName("li");if(0==g)for(d.style.display="block",j=0;j<i.length;j++)k=i[j],k.addEventListener?k.addEventListener("click",function(a){var i,j;for(c=a.target.innerText.substr(0,4)||a.srcElement.innerText.substr(0,4),i=0;i<h.length;i++)h[i].className="",j=h[i].getElementsByClassName("day-lunar")[0],j.setAttribute("title",""),j.className="day-lunar";b.showCurrentCal(c,f[1]),e.innerText=c+"年",f[0]=c,d.style.display="none",g=0},!1):k.attachEvent&&k.attchEvent("onclick",function(a){var i,j;for(c=a.target.innerText.substr(0,4)||a.srcElement.innerText.substr(0,4),i=0;i<h.length;i++)h[i].className="",j=h[i].getElementsByClassName("day-lunar")[0],j.setAttribute("title",""),j.className="day-lunar";b.showCurrentCal(c,f[1]),e.innerText=c+"年",f[0]=c,d.style.display="none",g=0});else 1==g&&(d.style.display="none");g=1&g+1},showMonthList:function(){var c,j,k,b=this,d=this.module.monthList,e=this.module.monthField,g=this.module.calBody.getElementsByTagName("li"),i=d.getElementsByTagName("li");if(0==h)for(d.style.display="block",j=0;j<i.length;j++)k=i[j],k.addEventListener?k.addEventListener("click",function(a){var j,k,i=a.target||a.srcElement;for(c=2==i.innerText.length?i.innerText.substr(0,1)-"0":i.innerText.substr(0,2)-"0",j=0;j<g.length;j++)g[j].className="",k=g[j].getElementsByClassName("day-lunar")[0],k.setAttribute("title",""),k.className="day-lunar";b.showCurrentCal(f[0],c-1),d.style.display="none",e.innerText=c+"月",f[1]=c-1,h=0},!1):k.attachEvent&&k.attchEvent("onclick",function(a){var g=a.target||a.srcElement;c=2==g.innerText.length?g.innerText.substr(0,1)-"0":g.innerText.substr(0,2)-"0",b.showCurrentCal(f[0],c-1),d.style.display="none",e.innerText=c+"月",f[1]=c-1,h=0});else 1==h&&(d.style.display="none");h=1&h+1},showHolList:function(){var h,j,b=this,c=this.module.holList,d=this.module.yearField,e=this.module.monthField,f=this.module.calBody.getElementsByTagName("li"),g=c.getElementsByTagName("li");if(0==i)for(c.style.display="block",h=0;h<g.length;h++)j=g[h],j.addEventListener?j.addEventListener("click",function(a){var g,h;for(g=0;g<f.length;g++)f[g].className="",h=f[g].getElementsByClassName("day-lunar")[0],h.setAttribute("title",""),h.className="day-lunar";switch(a.target.innerText||a.srcElement.innerText){case o[0]:b.showCurrentCal(2016,0),e.innerText="1月";break;case o[1]:b.showCurrentCal(2016,1),e.innerText="2月";break;case o[2]:b.showCurrentCal(2016,3),e.innerText="4月";break;case o[3]:b.showCurrentCal(2016,4),e.innerText="5月";break;case o[4]:b.showCurrentCal(2016,5),e.innerText="6月";break;case o[5]:b.showCurrentCal(2016,8),e.innerText="9月";break;case o[6]:b.showCurrentCal(2016,9),e.innerText="10月"}d.innerText="2016",c.style.display="none",i=0},!1):j.attachEvent&&j.attchEvent("onclick",function(a){switch(a.target.innerText||a.srcElement.innerText){case o[0]:b.showCurrentCal(2016,0);break;case o[1]:b.showCurrentCal(2016,1);break;case o[2]:b.showCurrentCal(2016,3);break;case o[3]:b.showCurrentCal(2016,4);break;case o[4]:b.showCurrentCal(2016,5);break;case o[5]:b.showCurrentCal(2016,8);break;case o[6]:b.showCurrentCal(2016,9)}c.style.display="none",i=0});else 1==i&&(c.style.display="none");i=1&i+1},showTimeBlock:function(){var a=this.module.timeBar||b;a&&""!=a.innerText&&setInterval(function(){var b=new Date;sTh=1==b.getHours().toString().length?"0"+b.getHours():b.getHours(),sTm=1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes(),sTs=1==b.getSeconds().toString().length?"0"+b.getSeconds():b.getSeconds(),a.innerText=sTh+":"+sTm+":"+sTs},1e3)},showCurrentCal:function(a,b){var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s;for(0>b?(a--,b=11,f[0]--,f[1]=11):b>11&&(a++,b=0,f[0]++,f[1]=0),c=this.module.calBody,d=(new Date).getMonth(),e=(new Date).getFullYear(),g=(new Date).getDate(),h=new Date,h.setFullYear(a,b),h.setDate(1),i=h.getFullYear(),j=h.getMonth(),k=h.getDay(),l=this.getSolarDays(i,j),m=c.getElementsByTagName("div"),n=c.getElementsByClassName("day-lunar"),o=0==k?6:k-1,q=0;l>q;q++)p=this.getLunarDay(a,b,q+1),m[o+q].innerText=q+1,m[o+q].setAttribute("date-time",i+"-"+"".concat(j+1)+"-"+"".concat(q+1)),1==p[3]?m[o+q].setAttribute("date-ltime","+"+p[1]+"-"+p[2]):m[o+q].setAttribute("date-ltime",p[1]+"-"+p[2]),n[o+q].innerText=this.switchFont(p[2]),q+1===g&&d==j&&e==i&&this.addClass(m[o+q].parentNode,"cur-day"),(0==(o+q-5)%7||0==(o+q-6)%7)&&this.addClass(m[o+q].parentNode,"weekend");for(q=0;o>q;q++)r=this.getSolarDays(i,j-1)-q,p=this.getLunarDay(a,b-1,r),this.addClass(m[o-q-1].parentNode,"other-day"),m[o-q-1].innerText=r,1>b?m[o-q-1].setAttribute("date-time",i-1+"-"+12+"-"+r):m[o-q-1].setAttribute("date-time",i+"-"+j+"-"+r),1==p[3]?m[o-q-1].setAttribute("date-ltime","+"+p[1]+"-"+p[2]):m[o-q-1].setAttribute("date-ltime",p[1]+"-"+p[2]),n[o-q-1].innerText=this.switchFont(p[2]),6==o-q-1&&this.addClass(m[o-q-1].parentNode,"weekend");for(q=o+l,s=1;q<m.length;q++,s++)p=this.getLunarDay(a,b+1,s),m[q].innerText=s,b>10?m[q].setAttribute("date-time","".concat(i+1)+"-"+1+"-"+s):m[q].setAttribute("date-time",i+"-"+"".concat(j+1+1)+"-"+s),1==p[3]?m[q].setAttribute("date-ltime","+"+p[1]+"-"+p[2]):m[q].setAttribute("date-ltime",p[1]+"-"+p[2]),(0==(q-5)%7||0==(q-6)%7)&&this.addClass(m[q].parentNode,"weekend"),n[q].innerText=this.switchFont(p[2]),this.addClass(m[q].parentNode,"other-day");this.refreshPanel(i,j,o)},getSolarDays:function(a,b){var c,d;return 0>b?(b=11,a--):b>11&&(b=0,a++),c=1===b?0==a%4&&0!==a%100||0==a%400?29:28:28,d=[31,c,31,30,31,30,31,31,30,31,30,31],d[b]},getLunarDay:function(a,b,c){var d,e,f,g,h,i,j,k,m,n;if(1900==a&&0>=b&&31>c)return[1899,12+b,c,0];for(d=new Date(1900,0,31),0>b?(b=11,a--):b>11&&(b=0,a++),e=new Date(a,b,c),f=(e.getTime()-d.getTime())/1e3/3600/24+1,j=1900;2100>=j;j++)if(g=this.getYearDays(j),g>=f)for(h=this.getLeapMonth(j),i=h?13:12,k=0;i>k;k++){if(m=i-k-1,n=l[j-1900]&1<<m?30:29,!(f>n))return h?h>k?[j,k+1,f,0]:k===h?[j,k,f,1]:[j,k,f,0]:[j,k+1,f,0];f-=n}else f-=g},getYearDays:function(a){var e,f,b=this.getLeapMonth(a),c=b?13:12,d=0;for(e=0;c>e;e++)f=c-e-1,d+=l[a-1900]&1<<f?30:29;return d},getLeapMonth:function(a){var b,c;for(a-=1900,b=0,c=16;20>c;c++)b+=l[a]&1<<c;return b>>16},getMfDate:function(a,b){var c,e,f,g,h,i;if(0>b?(a--,b=11):b>11&&(a++,b=0),c=Math.floor((a-1900)/4),e=(a-1900)%4,f=v[c].toString(2),f.length<32&&50>=c){for(g="",d=0;d<32-f.length;d++)g+="0";f=g.concat(f)}if(f=parseInt(f.substr(8*e,8),2),i=u[f].toString(2),i.length<48){for(g="",d=0;d<48-i.length;d++)g+="0";i=g.concat(i)}for(h=i.match(/(\d{2})/g),d=0;d<h.length;d++)h[d]=parseInt(h[d],2)+w[d];return 2101==a&&0==b?[5,20]:[h[2*b],h[2*b+1]]},getDizhi:function(a,c,d,e){var h,f=a,g=c;for(e=e||b,h=1;d>=h;h++)f=(f+1)%10,g=(g+1)%12;return e===b||null===e?m[f]+n[g]:3==e.length?e[2]<this.getMfDate(e[0],e[1])[0]?m[(f-1+10)%10]+n[(g-1+12)%12]:m[f]+n[g]:e[1]<31&&0==e[0]?m[(f-1+10)%10]+n[(g-1+12)%12]:m[f]+n[g]},getAstro:function(a,b){var c=["水瓶座","双鱼座","白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","山羊座"];switch(a+=1){case 1:return 20>b?c[11]:c[0];case 2:return 19>b?c[0]:c[1];case 3:return 21>b?c[1]:c[2];case 4:return 20>b?c[2]:c[3];case 5:return 21>b?c[3]:c[4];case 6:return 21>b?c[4]:c[5];case 7:return 21>b?c[5]:c[6];case 8:return 21>b?c[6]:c[7];case 9:return 21>b?c[7]:c[8];case 10:return 23>b?c[8]:c[9];case 11:return 22>b?c[9]:c[10];case 12:return 22>b?c[10]:c[11]}},showSpecDate:function(a){var d,l,m,n,o,c=this,e=a.target||a.srcElement,f=c.module.calBody,g=f.getElementsByTagName("li"),i=(f.getElementsByTagName("div"),c.module.monthField),k=2==i.innerText.length?i.innerText.substr(0,1)-"0":i.innerText.substr(0,2)-"0";if(j!=b||null!=j)for(l=0;l<g.length;l++)g[l].getElementsByTagName("div")[0].getAttribute("date-time")==j&&(m=g[l].className.indexOf("focus-day"),0!=m+1&&(g[l].className=g[l].className.substring(0,m)+g[l].className.substr(m+9)));if(n=e.parentNode.getElementsByTagName("div")[0].getAttribute("date-time").split("-"),(n[1]==i.innerText.substr(0,1)||12==n[1])&&c.addClass(e.parentNode,"focus-day"),j=e.parentNode.getElementsByTagName("div")[0].getAttribute("date-time"),"day-solar"==e.className){if(d=e.getAttribute("date-time").split("-"),c.showLunarBlock(d[0]-"0",d[1]-"1",d[2]-"0"),e.parentNode.className.indexOf("other-day")>=0&&(d[1]-k<0&&12!=d[1]||12==d[1]&&1==k)){if(1==d[1]&&12==k){if(c.toNextMonth(),j!=b||null!=j)for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))}else if(c.toPrevMonth(),j!=b||null!=j)for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))}else if(e.parentNode.className.indexOf("other-day")>=0&&(d[1]-k>0&&1!=d[1]||1==d[1]&&12==k)&&(c.toNextMonth(),j!=b||null!=j))for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))}else if("day-lunar"==e.className)if(lsBrother=e.parentNode.getElementsByTagName("div")[0],d=lsBrother.getAttribute("date-time").split("-"),c.showLunarBlock(d[0]-"0",d[1]-"1",d[2]-"0"),e.parentNode.className.indexOf("other-day")>=0&&(d[1]-k<0&&12!=d[1]||12==d[1]&&1==k)){if(1==d[1]&&12==k){if(c.toNextMonth(),j!=b||null!=j)for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))}else if(c.toPrevMonth(),j!=b||null!=j)for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))}else if(e.parentNode.className.indexOf("other-day")>=0&&(d[1]-k>0&&1!=d[1]||1==d[1]&&12==k)&&(c.toNextMonth(),j!=b||null!=j))for(l=0;l<g.length;l++)o=g[l].getElementsByTagName("div")[0].getAttribute("date-time"),o==j&&(c.addClass(g[l],"focus-day"),j=g[l].getElementsByTagName("div")[0].getAttribute("date-time"))},showLunarBlock:function(a,b,c){var t,u,v,w,x,y,d=this.module.curDate,e=this.module.curWeekDay,f=this.module.curDateNum,g=this.module.lunarSpecial,h=this.module.lunarInfo,i=this.module.lunarAnimal,j=this.module.lunarAstro,l=9>b?"0".concat(b+1):"".concat(b+1),m=10>c?"0"+c:c,o=this.getLunarDay(a,b,c),p=0==new Date(a,b,1).getDay()?6:new Date(a,b,1).getDay()-1,q=0==(c+p)%7?"星期日":"星期"+k[(c+p)%7-1];d.innerText=a+"-"+l+"-"+m,e.innerText=q,f.innerText=c,0==o[3]?g.innerText="农历"+r[o[1]-1]+"月"+this.switchFont(o[2]):1==o[3]&&(g.innerText="农历闰"+r[o[1]-1]+"月"+this.switchFont(o[2])),t=new Date(a,b,c),u=[],v=(a-1900)%60,w=12*((a-1900)%5)+b,x=Math.floor((t.getTime()-new Date(1900,0,1).getTime())/1e3/3600/24%60),u.push(this.getDizhi(6,0,v,[b,c]),this.getDizhi(3,1,w,[a,b,c]),this.getDizhi(0,10,x)),h.innerText=u[0]+"年"+u[1]+"月"+u[2]+"日",y=n.indexOf(u[0].substr(1)),i.innerText=s[y]+"年",j.innerText=this.getAstro(b,c)},createModule:function(){var a=this,b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate();a.module={calRoot:a.getEmt("prt_div"),calHead:a.getEmt("c-header"),ltYear:a.getEmt("prev-y-bar"),ntYear:a.getEmt("next-y-bar"),selectYear:a.getEmt("select-year-bar"),yearField:a.getEmt("year_field"),yearList:a.getEmt("year_list"),ltMonth:a.getEmt("prev-m-bar"),ntMonth:a.getEmt("next-m-bar"),selectMonth:a.getEmt("select-month-bar"),monthField:a.getEmt("month_field"),monthList:a.getEmt("month_list"),selectHol:a.getEmt("hol-bar"),holField:a.getEmt("hol_field"),holList:a.getEmt("hol_list"),goBack:a.getEmt("backToday"),timeBar:a.getEmt("cur_time"),calBody:a.getEmt("dates_bd"),lunarPanel:a.getEmt("lunar_panel"),curDate:a.getEmt("ln_date"),curWeekDay:a.getEmt("ln_weekday"),curDateNum:a.getEmt("date_sp"),curLunar:a.getEmt("date_ln"),lunarSpecial:a.getEmt("g_lunar"),lunarInfo:a.getEmt("g_ln_info"),lunarAnimal:a.getEmt("g_animal"),lunarAstro:a.getEmt("g_astro")},a.showTimeBlock(),a.showLunarBlock(c,d,e),a.showCurrentCal(c,d),f=[c,d],a.addEventAll()},refreshPanel:function(a,c,d){var f,g,h,i,q,r,s,u,v,e=this,l=e.module.calBody,m=e.getSolarDays(a,c);for(e.getMfDate(a,c),curMonthDays=e.getSolarDays(a,c),soli=l.getElementsByTagName("div"),luli=l.getElementsByClassName("day-lunar"),q=e.getHolidays(a),r=0;r<l.children.length;r++)g=soli[r].getAttribute("date-time"),h=g.match(/\d+$/g),d>r?(i=e.getMfDate(a,c-1),f=c-1):r>=d+m?(i=e.getMfDate(a,c+1),f=c+1):(i=e.getMfDate(a,c),f=c),null!=h&&h!=b&&(h==i[0]?(e.addClass(luli[r],"feast-day"),luli[r].innerText=12==f?t[0]:t[2*f]):h==i[1]&&(e.addClass(luli[r],"feast-day"),luli[r].innerText=t[2*f+1]));for(r=0;r<l.children.length;r++){for(g=soli[r].getAttribute("date-time"),attrl=soli[r].getAttribute("date-ltime"),h=g.substr(5),s=0;s<q.length-7;s++)0==q[s][1]&&h==q[s][0]?(u=0==q[s][2]?"fest":"isolar",luli[r].innerText=p[s],luli[r].setAttribute("title",p[s]),e.addClass(luli[r].parentNode,u)):1==q[s][1]&&attrl==q[s][0]&&(u=0==q[s][2]?"fest":"isolar",luli[r].innerText=p[s],luli[r].setAttribute("title",p[s]),e.addClass(luli[r].parentNode,u));for(s=q.length-7;s<q.length;s++)if(0==q[s][1]&&h==q[s][0]){if(luli[r].innerText=o[s-31],e.addClass(luli[r].parentNode,"fest"),2016==a)if(0==s-31)e.addClass(luli[r+1].parentNode,"fest"),e.addClass(luli[r+2].parentNode,"fest"),e.addClass(luli[r].parentNode,"rest"),e.addClass(luli[r+1].parentNode,"rest"),e.addClass(luli[r+2].parentNode,"rest");else if(2==s-31&&3==c)e.addClass(luli[r-2].parentNode,"fest"),e.addClass(luli[r-1].parentNode,"fest"),e.addClass(luli[r-2].parentNode,"rest"),e.addClass(luli[r-1].parentNode,"rest"),e.addClass(luli[r].parentNode,"rest");else if(3==s-31)e.addClass(luli[r-1].parentNode,"fest"),e.addClass(luli[r+1].parentNode,"fest"),e.addClass(luli[r-1].parentNode,"rest"),e.addClass(luli[r].parentNode,"rest"),e.addClass(luli[r+1].parentNode,"rest");else if(5==s-31){for(v=1;6>=v;v++)e.addClass(luli[r+v].parentNode,"fest"),e.addClass(luli[r+v].parentNode,"rest");e.addClass(luli[r].parentNode,"rest")}}else if(1==q[s][1]&&attrl==q[s][0]&&(luli[r].innerText=o[s-31],e.addClass(luli[r].parentNode,"fest"),2016==a))if(1==s-31){for(v=0;6>v;v++)e.addClass(luli[r+v].parentNode,"fest"),e.addClass(luli[r+v].parentNode,"rest");e.addClass(luli[r].parentNode,"rest"),e.addClass(luli[r-1].parentNode,"rest"),e.addClass(luli[r-1].parentNode,"fest")}else 4==s-31?(e.addClass(luli[r+1].parentNode,"fest"),e.addClass(luli[r+2].parentNode,"fest"),e.addClass(luli[r].parentNode,"rest"),e.addClass(luli[r+1].parentNode,"rest"),e.addClass(luli[r+2].parentNode,"rest")):5==s-31&&(e.addClass(luli[r+1].parentNode,"fest"),e.addClass(luli[r+2].parentNode,"fest"),e.addClass(luli[r].parentNode,"rest"),e.addClass(luli[r+1].parentNode,"rest"),e.addClass(luli[r+2].parentNode,"rest"))}},getHolidays:function(a){var d,e,f,g,h,b=this,c={};for(d=0;d<p.length+o.length;d++)c[d]=[];for(d=0;d<p.length+o.length;){switch(d){case 0:c[0]=["2-2",0,1];break;case 1:c[1]=["2-14",0,1];break;case 2:c[2]=["1-15",1,0];break;case 3:c[3]=["3-8",0,1];break;case 4:c[4]=["2-2",1,0];break;case 5:c[5]=["3-12",0,1];break;case 6:c[6]=["3-15",0,1];break;case 7:c[7]=["4-22",0,1];break;case 8:c[8]=["5-4",0,1];break;case 9:e=new Date,e.setFullYear(a),e.setMonth(4),e.setDate(1),f=0==e.getDay()?6:e.getDay()-1,g=14-f,c[9]=["5-"+g,0,0];break;case 10:c[10]=["5-12",0,1];break;case 11:c[11]=["5-18",0,1];break;case 12:c[12]=["6-1",0,0];break;case 13:c[13]=["6-5",0,1];break;case 14:c[14]=["6-23",0,1];break;case 15:c[15]=["6-24",0,1];break;case 16:c[16]=["7-1",0,0];break;case 17:c[17]=["8-1",0,0];break;case 18:c[18]=["7-7",1,0];break;case 19:c[19]=["7-15",1,0];break;case 20:c[20]=["9-3",0,0];break;case 21:c[21]=["9-10",0,0];break;case 22:c[22]=["9-9",1,0];break;case 23:e=new Date,e.setFullYear(a),e.setMonth(9),e.setDate(1),f=0==e.getDay()?6:e.getDay()-1,g=0==f?8:15-f,c[23]=["10-"+g,0,1];break;case 24:c[24]=["10-1",1,1];break;case 25:c[25]=["11-17",0,1];break;case 26:c[26]=["10-15",1,1];break;case 27:e=new Date,e.setFullYear(a),e.setMonth(10),e.setDate(1),f=0==e.getDay()?6:e.getDay()-1,g=4>f?25-f:32-f,c[27]=["11-"+g,0,1];break;case 28:c[28]=["12-1",0,1];break;case 29:c[29]=["12-24",0,0];break;case 30:c[30]=["12-25",0,0];break;case 31:c[31]=["1-1",0];break;case 32:c[32]=["1-1",1];break;case 33:h=b.getMfDate(a,3)[0],c[33]=["4-"+h,0];break;case 34:c[34]=["5-1",0];break;case 35:c[35]=["5-5",1];break;case 36:c[36]=["8-25",1];break;case 37:c[37]=["10-1",0]}d++}return c.length=d,c},getEmt:function(a,b){var b=b||document;return b.getElementById(a)},creatEmt:function(a,b){var b=b||document;return b.createElement(a)},switchFont:function(a){return a!=b||null!=a?11>a&&a>0?"初"+q[a-1]:21>a?20==a?"二十":"十"+q[a%10-1]:30==a?"三十":"廿"+q[a%10-1]:void 0},addClass:function(a,b){a.className+=1==a.nodeType&&""===a.className?b:" "+b},addEventAll:function(){var n,o,p,a=this,b=this.module.calBody,c=this.module.ltYear,d=this.module.ntYear,e=this.module.selectYear,g=(this.module.yearField,this.module.ltMonth),h=this.module.ntMonth,i=this.module.selectMonth,l=(this.module.monthList,this.module.selecHol,this.module.holField),m=this.module.goBack;for(c.addEventListener?c.addEventListener("click",function(b){a.toPrevYear(b)},!1):c.attachEvent&&c.attchEvent("onclick",function(b){a.toPrevYear(b)}),d.addEventListener?d.addEventListener("click",function(b){a.toNextYear(b)},!1):d.attachEvent&&d.attchEvent("onclick",function(b){a.toNextYear(b)}),g.addEventListener?g.addEventListener("click",function(b){a.toPrevMonth(b)},!1):g.attachEvent&&g.attchEvent("onclick",function(b){a.toPrevMonth(b)}),h.addEventListener?h.addEventListener("click",function(b){a.toNextMonth(b)},!1):h.attachEvent&&h.attchEvent("onclick",function(b){a.toNextMonth(b)}),e.addEventListener?e.addEventListener("click",function(b){a.showYearList(b)},!1):e.attachEvent&&e.attchEvent("onclick",function(b){a.showYearList(b)}),i.addEventListener?i.addEventListener("click",function(b){a.showMonthList(b)},!1):i.attachEvent&&i.attchEvent("onclick",function(b){a.showMonthList(b)}),l.addEventListener?l.addEventListener("click",function(b){a.showHolList(b)},!1):l.attachEvent&&l.attchEvent("onclick",function(b){a.showHolList(b)}),m.addEventListener?m.addEventListener("click",function(b){a.backCurrentDay(b)},!1):m.attachEvent&&m.attchEvent("onclick",function(b){a.backCurrentDay(b)}),n=b.getElementsByTagName("li"),o=0;o<n.length;o++)p=n[o],p.addEventListener?p.addEventListener("click",function(b){a.showSpecDate(b)},!1):p.attachEvent&&p.attchEvent("onclick",function(b){a.showSpecDate(b)})}},x.fn.init.prototype=x.fn,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("Calendar",[],function(){return x}),"object"==typeof a&&"object"==typeof a.document&&(a.Calendar=x)}(window);